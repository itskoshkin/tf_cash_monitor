# Инструкция к скрипту поиска банкоматов Тинькофф с долларами

Этот скрипт предназначен для мониторинга банкоматов Тинькофф, выдающих доллары США, в городе Нижний Новгород. Скрипт использует API Тинькофф для получения информации о банкоматах в указанном городе и фильтрует их по наличию долларов. Результаты записываются в базу данных SQLite.

## Конфигурация

Перед запуском скрипта убедитесь, что у вас настроены следующие параметры в файле `config.py`:

- `DB_NAME`: Имя файла базы данных (по умолчанию "atms.db").
- `CITY`: Город для поиска банкоматов (по умолчанию "Нижний Новгород").
- Координаты города для запроса к API.
- Фильтры для валют.
- Идентификаторы банкоматов, которые необходимо исключить из мониторинга.

## Зависимости

Для работы скрипта необходимо установить следующие зависимости:

- `requests`: Для отправки HTTP-запросов к API Тинькофф.
- `sqlite3`: Для работы с базой данных SQLite.

Установить зависимости можно с помощью команды `pip install requests sqlite3`.

## Работа со скриптом

Скрипт автоматически создает базу данных и таблицу для хранения информации о банкоматах при первом запуске. Для запуска мониторинга банкоматов выполните скрипт:

```
python main.py
```

Скрипт будет периодически (с интервалом, указанным в `POLL_DELAY_SECONDS`) обращаться к API для получения актуальной информации о банкоматах и обновлять базу данных.

## Структура базы данных

База данных содержит таблицу `atms` со следующими полями:

- `id`: Уникальный идентификатор записи.
- `atm_id`: Идентификатор банкомата.
- `city`: Город, в котором находится банкомат.
- `place`: Место, где расположен банкомат.
- `address`: Адрес банкомата.
- `latitude`: Широта местоположения банкомата.
- `longitude`: Долгота местоположения банкомата.
- `usd_amount`: Количество долларов, доступное в банкомате.
- `tcs_link`: Ссылка на банкомат на карте Тинькофф.
- `gmaps_link`: Ссылка на банкомат в Google Maps.
- `ymaps_link`: Ссылка на банкомат в Яндекс Карты.

## Основные функции

- `get_atms_info(city)`: Получает информацию о банкоматах в указанном городе.
- `get_suitable_atms(city)`: Фильтрует банкоматы по наличию долларов.
- `save_report(atms, city)`: Сохраняет информацию о подходящих банкоматах в базу данных.
- `try_find_cash()`: Основная функция для поиска банкоматов с долларами.
- `main()`: Запускает мониторинг банкоматов в бесконечном цикле с обработкой исключений.

## Прерывание работы скрипта

Для остановки скрипта используйте комбинацию клавиш `Ctrl+C`.

## Важные замечания

- Не устанавливайте слишком низкое значение для `POLL_DELAY_SECONDS`, чтобы избежать временной блокировки со стороны API.
- Убедитесь, что ваши конфигурационные данные корректны и соответствуют формату, ожидаемому скриптом.